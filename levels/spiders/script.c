#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

/* Fast64 begin persistent block [includes] */
/* Fast64 end persistent block [includes] */

#include "make_const_nonconst.h"
#include "levels/spiders/header.h"

/* Fast64 begin persistent block [scripts] */
/* Fast64 end persistent block [scripts] */

const LevelScript level_spiders_entry[] = {
	INIT_LEVEL(),
	LOAD_MIO0(0x7, _spiders_segment_7SegmentRomStart, _spiders_segment_7SegmentRomEnd), 
	LOAD_MIO0(0xa, _bidw_skybox_mio0SegmentRomStart, _bidw_skybox_mio0SegmentRomEnd), 
	LOAD_YAY0(0x08, _common0_yay0SegmentRomStart, _common0_yay0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	LOAD_YAY0(0x06, _group14_yay0SegmentRomStart, _group14_yay0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group14_geoSegmentRomStart, _group14_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_15), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIDERS_COMB, spiders_comb_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIDERS_BEE, spiders_bee_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIDERS_BEE_ANGY, spiders_bee_angy_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIDERS_BEE_BLUE, spiders_bee_blue_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIDERS_BOARDOS, spiders_bee_boardos_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIDERS_NEST, spiders_waterfally_nest_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIDERS_PA, spiders_waterfally_pa_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIDERS_PB, spiders_waterfally_pb_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIDERS_SWITCH, waterfally_switch_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIDERS_SWITCHBLOCK, waterfally_switchblock_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_SPIDERS_GATE, spiders_cage_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_CASTLE_GROUNDS_WARP_PIPE, warp_pipe_geo), 

	/* Fast64 begin persistent block [level commands] */
	/* Fast64 end persistent block [level commands] */

	AREA(1, spiders_area_1),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf0, LEVEL_CASTLE, 0x01, 0x20, WARP_NO_CHECKPOINT),
		WARP_NODE(0xf1, LEVEL_CASTLE, 0x01, 0x30, WARP_NO_CHECKPOINT),
		WARP_NODE(0x11, LEVEL_SPIDERS, 0x01, 0x12, WARP_NO_CHECKPOINT),
		WARP_NODE(0x12, LEVEL_SPIDERS, 0x01, 0x11, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_NONE, -5006, 229, 611, 0, 7, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -777, -109, -7478, 0, 106, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 3199, -358, -6968, 0, 62, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 4347, 36, -3952, 0, 1, 1, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 3541, 323, -1582, 0, -19, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 5972, 43, 3715, 0, -81, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -4920, 1367, 6581, 0, 59, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_NONE, -3284, 1367, 7491, 0, 59, 0, 0x00000000, bhvCoinFormation),
		OBJECT(MODEL_BOWLING_BALL, -4150, 1428, 7012, 0, 59, 0, (1 << 24) | (1 << 16), bhvFireSpitter),
		MARIO_POS(0x01, 0, 4737, 10, -8665),
		OBJECT(MODEL_NONE, 4739, 5, -8673, 0, 0, 0, (0xa << 16), bhvAirborneWarp),
		OBJECT(MODEL_SPIDERS_BEE_ANGY, 10466, 368, 2922, 0, -114, 0, (36 << 24) | (36 << 16), bhvSpidersBuddy),
		OBJECT(MODEL_SPIDERS_BEE, 4948, -297, -7915, 0, -151, 0, (2 << 16), bhvSpidersBuddy),
		OBJECT(MODEL_SPIDERS_BEE, 5220, -271, -8561, 0, -13, 0, (3 << 16), bhvSpidersBuddy),
		OBJECT(MODEL_SPIDERS_BEE, -3503, 342, -8526, 0, 178, 0, (15 << 16), bhvSpidersBuddy),
		OBJECT(MODEL_SPIDERS_BEE, -3125, -723, -8197, 0, 178, 0, (30 << 16), bhvSpidersBuddy),
		OBJECT(MODEL_SPIDERS_BEE, -8981, -313, 3614, 0, 178, 0, (32 << 16), bhvSpidersBuddy),
		OBJECT(MODEL_SPIDERS_BEE, -2533, 9, 342, 0, 178, 0, (33 << 16), bhvSpidersBuddy),
		OBJECT(MODEL_SPIDERS_BEE_BLUE, -546, -915, 9454, 0, -150, 0, (40 << 16), bhvSpidersBuddy),
		OBJECT(MODEL_SPIDERS_BEE_BLUE, -9890, 1190, 4697, 0, -29, 0, (5 << 16), bhvSpidersHawk),
		OBJECT(MODEL_NONE, -9037, 1079, 6203, 0, -29, 0, (17 << 16), bhvCoinFormation),
		OBJECT(MODEL_BLUE_COIN_SWITCH, -5788, 668, -7324, 0, 66, 0, 0x00000000, bhvBlueCoinSwitch),
		OBJECT(MODEL_SPIDERS_BOARDOS, -1475, 2185, -2548, 0, -59, 0, 0x00000000, bhvSpidersBoardos),
		OBJECT(MODEL_SPIDERS_BOARDOS, 4389, 2187, -2536, 0, 31, 0, 0x00000000, bhvSpidersBoardos),
		OBJECT(MODEL_SPIDERS_BOARDOS, -4, 2185, 4, 0, 31, 0, 0x00000000, bhvSpidersBoardos),
		OBJECT(MODEL_SPIDERS_BOARDOS, 2924, 2185, 9, 0, 31, 0, 0x00000000, bhvSpidersBoardos),
		OBJECT(MODEL_EXCLAMATION_BOX, -881, 5829, 8832, 0, -59, 0, (2 << 16), bhvExclamationBox),
		OBJECT(MODEL_SPIDERS_GATE, 8256, 0, 3757, 0, 0, 0, 0x00000000, bhvSpidersCage),
		OBJECT(MODEL_SPIDERS_BEE_BLUE, 8319, 0, 3384, 0, -51, 0, (48 << 16), bhvSpidersBuddy),
		OBJECT(MODEL_NONE, -3329, 6, 290, 0, -80, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, 3251, -917, -7046, 0, -80, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, -5377, 2969, -6097, 0, -80, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, 9205, 3921, 2427, 0, -80, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, 11072, 358, 2700, 0, -80, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, 10157, 243, 1283, 0, -80, 0, 0x00000000, bhvGoombaTripletSpawner),
		OBJECT(MODEL_NONE, 7437, 0, 2871, 0, -80, 0, 0x00000000, bhvGoombaTripletSpawner),
		OBJECT(MODEL_NONE, 5109, 197, 3839, 0, -80, 0, (2 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, 9754, 1951, 1422, 0, -114, 0, (17 << 16), bhvCoinFormation),
		OBJECT(MODEL_NONE, 1376, -1319, -4364, 0, -114, 0, 0x00000000, bhvSpidersDeathTrigger),
		OBJECT(MODEL_EXCLAMATION_BOX, -2958, -299, -7884, 0, -59, 0, (6 << 16), bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, -8056, 949, 6296, 0, -59, 0, (6 << 16), bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, 8883, 323, 4738, 0, -59, 0, (6 << 16), bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, -2330, 346, -3313, 0, -59, 0, (6 << 16), bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, -8966, 224, 1447, 0, -59, 0, (6 << 16), bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, 11701, 896, 3683, 0, -59, 0, (6 << 16), bhvExclamationBox),
		OBJECT(MODEL_STAR, 9164, 4391, 2980, 0, -59, 0, (5 << 24), bhvStar),
		OBJECT(MODEL_NONE, 9973, 855, 2986, 0, -114, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_NONE, 10039, 1015, 2595, 0, -114, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_NONE, 10051, 626, 2598, 0, -114, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_NONE, 9860, 1742, 3369, 0, -114, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_NONE, 9936, 2326, 2790, 0, -114, 0, (1 << 24) | (1 << 16), bhvFireSpitter),
		OBJECT(MODEL_NONE, 9941, 2012, 3031, 0, -114, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_NONE, 9648, 2630, 1864, 0, -114, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_SPIDERS_SWITCH, 9569, 1347, 1610, 0, -32, 0, 0x00000000, bhvSpidersGateSwitch),
		OBJECT(MODEL_NONE, -3312, 0, 178, 0, -80, 0, 0x00000000, bhvGoombaTripletSpawner),
		OBJECT(MODEL_SPIDERS_BEE_BLUE, -6793, 63, -8680, 0, -61, 0, (2 << 16), bhvSpidersHawk),
		OBJECT(MODEL_SPIDERS_BEE_BLUE, -5088, 1351, -5052, 0, -114, 0, (3 << 16), bhvSpidersHawk),
		OBJECT(MODEL_SPIDERS_BEE_BLUE, 3228, 238, 527, 0, -114, 0, 0x00000000, bhvSpidersHawk),
		OBJECT(MODEL_SPIDERS_BEE_BLUE, -1923, -470, -5169, 0, -114, 0, (4 << 16), bhvSpidersHawk),
		OBJECT(MODEL_THI_WARP_PIPE, -9061, 654, 6183, 0, 71, 0, (0x11 << 16), bhvWarpPipe),
		OBJECT(MODEL_THI_WARP_PIPE, 9224, 3921, 2427, 0, 71, 0, (0x12 << 16), bhvWarpPipe),
		OBJECT(MODEL_PIRANHA_PLANT, 8984, 19, 5162, 0, -80, 0, 0x00000000, bhvPiranhaPlant),
		OBJECT(MODEL_PIRANHA_PLANT, -4742, 281, -7966, 0, -80, 0, 0x00000000, bhvPiranhaPlant),
		OBJECT(MODEL_PIRANHA_PLANT, -8961, -138, 1450, 0, -80, 0, 0x00000000, bhvPiranhaPlant),
		OBJECT(MODEL_PIRANHA_PLANT, -7426, 958, 3975, 0, -80, 0, 0x00000000, bhvPiranhaPlant),
		OBJECT(MODEL_PIRANHA_PLANT, -3730, 39, 1224, 0, -80, 0, 0x00000000, bhvPiranhaPlant),
		OBJECT(MODEL_KOOPA_WITHOUT_SHELL, -6181, 263, -346, 0, -80, 0, 0x00000000, bhvKoopa),
		OBJECT(MODEL_KOOPA_WITHOUT_SHELL, 4456, 0, -2101, 0, -80, 0, 0x00000000, bhvKoopa),
		OBJECT(MODEL_KOOPA_WITHOUT_SHELL, 1774, -319, -8505, 0, -80, 0, 0x00000000, bhvKoopa),
		OBJECT(MODEL_SPIDERS_BEE_BLUE, -3705, 174, -3298, 0, -29, 0, (1 << 16), bhvSpidersHawk),
		OBJECT(MODEL_RED_COIN, -7222, -2, -2625, 0, 31, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -2843, 357, 2422, 0, 31, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -3812, 357, 4081, 0, 31, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 7102, -164, -4254, 0, 31, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -1734, -426, -5770, 0, 31, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -5191, 441, -12578, 0, 31, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -5112, 357, 2959, 0, 31, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -8082, 12, -7568, 0, 31, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_NONE, -9647, 62, 3183, 0, 31, 0, (4 << 24), bhvHiddenRedCoinStar),
		OBJECT(MODEL_BLUE_COIN, -4748, 750, -6655, 0, 66, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -5236, 750, -7042, 0, 66, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -4416, 1528, -6347, 0, 66, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -4156, 1528, -5906, 0, 66, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -4129, 1528, -5352, 0, 66, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -4991, 2199, -6914, 0, 66, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -5388, 2199, -7125, 0, 66, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -5737, 2199, -7313, 0, 66, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_SPIDERS_COMB, -4233, 1744, -6196, 0, 31, 0, (3 << 24), bhvHiddenStarTrigger),
		OBJECT(MODEL_SPIDERS_COMB, -5769, 1509, -5464, 0, 31, 0, (3 << 24), bhvHiddenStarTrigger),
		OBJECT(MODEL_SPIDERS_COMB, -5856, 2334, -5464, 0, 31, 0, (3 << 24), bhvHiddenStarTrigger),
		OBJECT(MODEL_SPIDERS_COMB, -6326, 1520, -6281, 0, 31, 0, (3 << 24), bhvHiddenStarTrigger),
		OBJECT(MODEL_SPIDERS_COMB, -5068, 2386, -6966, 0, 31, 0, (3 << 24), bhvHiddenStarTrigger),
		OBJECT(MODEL_SPIDERS_NEST, -4097, 1744, -5545, 0, 31, 0, (15 << 16), bhvExclamationBox),
		OBJECT(MODEL_SPIDERS_NEST, -6135, 1506, -5905, 0, 31, 0, (15 << 16), bhvExclamationBox),
		OBJECT(MODEL_SPIDERS_NEST, -4948, 1005, -6845, 0, 31, 0, (15 << 16), bhvExclamationBox),
		OBJECT(MODEL_SPIDERS_NEST, -6484, 2363, -6721, 0, 31, 0, (15 << 16), bhvExclamationBox),
		OBJECT(MODEL_SPIDERS_NEST, -5637, 2386, -7294, 0, 31, 0, (15 << 16), bhvExclamationBox),
		OBJECT(MODEL_SPIDERS_NEST, -5534, 1007, -7185, 0, 31, 0, (15 << 16), bhvExclamationBox),
		OBJECT(MODEL_SPIDERS_NEST, 9262, 4348, 2205, 0, 31, 0, (15 << 16), bhvExclamationBox),
		OBJECT(MODEL_SPIDERS_NEST, 9313, 4757, 3340, 0, 31, 0, (15 << 16), bhvExclamationBox),
		OBJECT(MODEL_SPIDERS_NEST, 8575, 4839, 3141, 0, 31, 0, (15 << 16), bhvExclamationBox),
		OBJECT(MODEL_STAR, 4355, 2517, -3581, 0, 31, 0, (1 << 24), bhvStar),
		OBJECT(MODEL_STAR, -1261, 3662, 9473, 0, -59, 0, 0x00000000, bhvStar),
		OBJECT(MODEL_STAR, 8661, 284, 3738, 0, 31, 0, (2 << 24), bhvStar),
		OBJECT(MODEL_NONE, -5364, 3403, -6078, 0, 31, 0, (3 << 24), bhvHiddenStar),
		OBJECT(MODEL_SPIDERS_PA, -913, 1522, 8871, 0, -51, 0, 0x00000000, bhvSpidersPA),
		OBJECT(MODEL_SPIDERS_PB, -913, 1822, 8871, 0, -51, 0, 0x00000000, bhvSpidersPB),
		OBJECT(MODEL_SPIDERS_PA, -913, 2722, 8871, 0, -51, 0, 0x00000000, bhvSpidersPA),
		OBJECT(MODEL_SPIDERS_PB, -913, 3022, 8871, 0, -51, 0, 0x00000000, bhvSpidersPB),
		OBJECT(MODEL_WHOMP, -684, -242, -7511, 0, 103, 0, 0x00000000, bhvSmallWhomp),
		OBJECT(MODEL_WHOMP, -6219, 1367, 5690, 0, 61, 0, 0x00000000, bhvSmallWhomp),
		OBJECT(MODEL_HEART, 11094, 408, 2723, 0, -114, 0, 0, bhvRecoveryHeart),
		TERRAIN(spiders_area_1_collision),
		MACRO_OBJECTS(spiders_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_HONEY),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(0x01, 0, 4737, 10, -8665),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
